---
import type { Experience } from '../../../types/experience';

interface Props {
  experience: Experience;
  index: number;
}

const { experience: exp, index } = Astro.props;
---

<div
  class={`relative flex flex-col md:flex-row gap-8 md:gap-0 ${index % 2 === 0 ? '' : 'md:flex-row-reverse'}`}
>
  {/* Timeline Dot */}
  <div
    data-testid="timeline-dot"
    class="absolute left-0 md:left-1/2 top-0 w-4 h-4 rounded-full bg-background border-2 border-accent -translate-x-1/2 z-10 hidden md:block"
  >
  </div>

  <div class={`w-full md:w-[45%]`}>
    <div
      class="p-6 md:p-8 rounded-2xl border border-border bg-surface hover:border-accent/50 transition-colors duration-300 shadow-sm group"
    >
      <div class="flex flex-col gap-2 mb-4">
        <span class="text-sm font-semibold text-accent tracking-wide uppercase"
          >{exp.period}</span
        >
        <h3
          class="text-h3 font-bold text-primary group-hover:text-accent transition-colors"
        >
          {exp.role}
        </h3>
        <div class="flex items-center gap-2 text-secondary font-medium">
          <span class="text-lg">{exp.company}</span>
          <span class="w-1 h-1 rounded-full bg-border"></span>
          <span class="text-sm">{exp.location}</span>
        </div>
      </div>

      <ul class="space-y-3 mb-6">
        {
          exp.description.map((item) => (
            <li class="text-sm text-secondary flex gap-2">
              <span class="text-accent mt-1.5 shrink-0 w-1.5 h-1.5 rounded-full bg-accent" />
              <span>{item}</span>
            </li>
          ))
        }
      </ul>

      <div class="flex flex-wrap gap-2">
        {
          exp.skills.map((skill) => (
            <span class="px-2 py-1 rounded bg-background border border-border text-[10px] font-mono text-secondary uppercase tracking-tighter">
              {skill}
            </span>
          ))
        }
      </div>
    </div>
  </div>
</div>
