---
import { Image } from 'astro:assets';
import Icon from '../../common/Icon.astro';

interface Props {
  project: {
    id: string;
    title: string;
    category: string;
    thumbnail: string;
    imageAlt: string;
    tags: string[];
    summary: string;
    links: {
      live: string;
      github: string;
    };
    featured: boolean;
  };
}

const { project } = Astro.props;
---

<div
  data-project-category={project.category}
  class="group relative bg-surface border border-border rounded-2xl overflow-hidden transition-all duration-500 hover:border-accent/50 hover:shadow-2xl hover:-translate-y-2"
>
  {/* Project Image */}
  <div class="aspect-[16/10] overflow-hidden relative">
    <Image
      src={project.thumbnail}
      alt={project.imageAlt}
      width={800}
      height={500}
      format="avif"
      widths={[400, 800]}
      sizes="(max-width: 768px) 400px, 800px"
      loading="lazy"
      decoding="async"
      class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
    />

    {/* Overlay with Links */}
    <div
      class="absolute inset-0 bg-primary/80 backdrop-blur-sm opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity duration-500 flex flex-col items-center justify-center gap-4 pointer-events-none group-hover:pointer-events-auto group-focus-within:pointer-events-auto"
    >
      <button
        data-project-details={project.id}
        class="flex items-center gap-2 px-6 py-3 bg-accent text-white rounded-full font-semibold hover:scale-105 transition-all active:scale-95 shadow-lg hover:shadow-accent/40 cursor-pointer"
        aria-label={`View detailed information for ${project.title}`}
      >
        <Icon name="info" class="w-5 h-5" />
        <span>View Details</span>
      </button>
      <div class="flex gap-4">
        <a
          href={project.links.live}
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center justify-center w-12 h-12 bg-surface border border-border text-primary rounded-full hover:scale-110 transition-all active:scale-95 shadow-lg hover:border-accent/50"
          aria-label={`View live site for ${project.title}`}
          title="Live Project"
        >
          <Icon name="external-link" class="w-5 h-5" />
        </a>
        <a
          href={project.links.github}
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center justify-center w-12 h-12 bg-surface border border-border text-primary rounded-full hover:scale-110 transition-all active:scale-95 shadow-lg hover:border-accent/50"
          aria-label={`View source code for ${project.title}`}
          title="Source Code"
        >
          <Icon name="github" class="w-5 h-5" />
        </a>
      </div>
    </div>
  </div>

  {/* Project Content */}
  <div class="p-6 md:p-8">
    <div class="flex items-center justify-between mb-3">
      <span
        class="text-xs font-semibold text-accent uppercase tracking-widest px-2 py-1 bg-accent/10 rounded"
      >
        {project.category}
      </span>
      {
        project.featured && (
          <span class="flex items-center gap-1 text-[10px] font-bold text-yellow-500 uppercase">
            <Icon name="star" class="w-3 h-3 fill-current" />
            Featured
          </span>
        )
      }
    </div>

    <h3
      class="text-xl md:text-2xl font-display font-bold text-primary mb-3 group-hover:text-accent transition-colors"
    >
      {project.title}
    </h3>

    <p
      class="text-secondary text-sm md:text-base leading-relaxed mb-6 line-clamp-2"
    >
      {project.summary}
    </p>

    <div class="flex flex-wrap gap-2">
      {
        project.tags.map((tag) => (
          <span class="px-2 py-1 bg-background border border-border rounded-md text-[10px] md:text-xs font-mono text-secondary">
            {tag}
          </span>
        ))
      }
    </div>
  </div>
</div>
